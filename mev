#!/bin/sh

set -e

case "$1" in
  backfill)
        echo "Running backfill from block $2 to block $3"
	;;
  inspect)
        block_number=$2
        echo "Inspecting block $block_number"
        kubectl exec -ti deploy/mev-inspect-deployment -- poetry run inspect-block $block_number
	;;
  test)
        echo "Running tests"
        kubectl exec -ti deploy/mev-inspect-deployment -- poetry run pytest tests
	;;
  *)
	echo "Usage: "$1" {inspect|test}"
	exit 1
esac

exit 0
